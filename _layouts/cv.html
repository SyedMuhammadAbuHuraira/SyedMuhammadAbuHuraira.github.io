<!doctype html>
<html lang="en">

<head>
  {% include head.html %}

  <link href="assets/css/cv.css" type="text/css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
    <!-- Skip to main content link -->
    <a href="#main-content" class="skip-to-main">Skip to main content</a>

    {% include nav_head.html %}

    <!-- Mobile Navigation Overlay -->
    <div class="mobile-nav-overlay" id="mobileNav">
        <div class="mobile-nav-content">
            <!-- REMOVED: mobile-nav-header -->
            <nav class="mobile-nav-links">       
                <a href="/cv.html" class="mobile-nav-link">CV</a>
                <a href="/academic-works.html" class="mobile-nav-link">Academic Works</a>
            </nav>
        </div>
    </div>

    <main id="main-content" class="container content-container">
        <!-- Left sidebar with social icons (Desktop only) -->
        <aside class="sidebar social-sidebar">
            <div class="social-icons">
                <a href="{{site.github}}" class="social-icon" aria-label="GitHub">
                    <img src="/assets/images/github.svg" alt="GitHub">
                </a>
                <a href="{{site.twitter}}" class="social-icon" aria-label="Twitter">
                    <img src="/assets/images/twitter.svg" alt="Twitter">
                </a>
                <a href="{{site.linkedin}}" class="social-icon" aria-label="LinkedIn">
                    <img src="/assets/images/linkedin.svg" alt="LinkedIn">
                </a>
                <a href="{{site.google-scholar}}" class="social-icon" aria-label="Google Scholar">
                    <img src="/assets/images/google-scholar.svg" alt="Google Scholar">
                </a>
                <a href="{{site.bluesky}}" class="social-icon" aria-label="Bluesky">
                    <img src="/assets/images/bluesky.svg" alt="Bluesky">
                </a>
            </div>
        </aside>

        <!-- Main content area -->
        <div class="main-content-wrapper">
            <div id="cv-box">
                {{content}}
            </div>
        </div>

        <!-- Right sidebar - Empty (Desktop only) -->
        <aside class="sidebar profile-sidebar">
            <!-- Empty sidebar for layout spacing -->
        </aside>
    </main>

    <!-- Footer with social icons for tablet/mobile -->
    <footer class="site-footer cv-footer">
        <div class="footer-content">
            <div class="footer-social-icons">
                <a href="{{site.github}}" class="social-icon" aria-label="GitHub">
                    <img src="/assets/images/github.svg" alt="GitHub">
                </a>
                <a href="{{site.twitter}}" class="social-icon" aria-label="Twitter">
                    <img src="/assets/images/twitter.svg" alt="Twitter">
                </a>
                <a href="{{site.linkedin}}" class="social-icon" aria-label="LinkedIn">
                    <img src="/assets/images/linkedin.svg" alt="LinkedIn">
                </a>
                <a href="{{site.google-scholar}}" class="social-icon" aria-label="Google Scholar">
                    <img src="/assets/images/google-scholar.svg" alt="Google Scholar">
                </a>
                <a href="{{site.bluesky}}" class="social-icon" aria-label="Bluesky">
                    <img src="/assets/images/bluesky.svg" alt="Bluesky">
                </a>
            </div>
            <div class="footer-copyright">
                &copy;2024- {{ 'now' | date: "%Y" }} Jordan Terry
            </div>
        </div>
    </footer>

    <!-- NEW: Desktop-only Footer -->
    <footer class="site-footer cv-desktop-footer" role="contentinfo">
        <div class="footer-content">
            <p class="copyright">
                &copy; <span class="year-range">2024-{{ 'now' | date: "%Y" }}</span> 
                <span class="company-name">Jordan Terry</span>. 
            </p>
        </div>
    </footer>

    <!-- Add JavaScript for mobile navigation -->
   <script>
document.addEventListener('DOMContentLoaded', function() {
    const hamburgerMenu = document.querySelector('.hamburger-menu');
    const mobileNav = document.querySelector('.mobile-nav-overlay');
    const closeMobileNav = document.querySelector('.mobile-nav-close');
    const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
    
    console.log('Hamburger menu:', hamburgerMenu);
    console.log('Mobile nav:', mobileNav);
    console.log('Close button:', closeMobileNav);
    console.log('Nav links:', mobileNavLinks.length);
    
    // Toggle mobile nav when hamburger is clicked
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', function() {
            console.log('Hamburger clicked');
            
            // FIX: Get the current state directly from the element
            const currentState = this.getAttribute('aria-expanded');
            console.log('Current state:', currentState);
            
            if (currentState === 'true') {
                // Close menu
                this.setAttribute('aria-expanded', 'false');
                if (mobileNav) {
                    mobileNav.classList.remove('active');
                }
                document.body.style.overflow = '';
                console.log('Closing menu - aria-expanded set to false');
            } else {
                // Open menu
                this.setAttribute('aria-expanded', 'true');
                if (mobileNav) {
                    mobileNav.classList.add('active');
                }
                document.body.style.overflow = 'hidden';
                console.log('Opening menu - aria-expanded set to true');
            }
        });
    }
    
    // Close mobile nav when close button is clicked
    if (closeMobileNav) {
        closeMobileNav.addEventListener('click', function() {
            console.log('Close button clicked');
            if (hamburgerMenu) {
                hamburgerMenu.setAttribute('aria-expanded', 'false');
            }
            if (mobileNav) {
                mobileNav.classList.remove('active');
            }
            document.body.style.overflow = '';
        });
    }
    
    // Close mobile nav when clicking on a link
    mobileNavLinks.forEach(link => {
        link.addEventListener('click', function() {
            console.log('Nav link clicked');
            if (hamburgerMenu) {
                hamburgerMenu.setAttribute('aria-expanded', 'false');
            }
            if (mobileNav) {
                mobileNav.classList.remove('active');
            }
            document.body.style.overflow = '';
        });
    });
    
    console.log('Initial aria-expanded:', hamburgerMenu ? hamburgerMenu.getAttribute('aria-expanded') : 'No hamburger');
});
    const hamburgerMenu = document.querySelector('.hamburger-menu');
    const mobileNav = document.querySelector('.mobile-nav-overlay');
    const closeMobileNav = document.querySelector('.mobile-nav-close');
    const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
    
    // Debug: Log elements to console to check if they exist
    console.log('Hamburger menu:', hamburgerMenu);
    console.log('Mobile nav:', mobileNav);
    console.log('Close button:', closeMobileNav);
    console.log('Nav links:', mobileNavLinks.length);
    
    // Toggle mobile nav when hamburger is clicked
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', function() {
            console.log('Hamburger clicked');
            const isExpanded = this.getAttribute('aria-expanded') === 'true';
            console.log('Is expanded before:', isExpanded);
            
            if (isExpanded) {
                // Close menu
                this.setAttribute('aria-expanded', 'false');
                if (mobileNav) {
                    mobileNav.classList.remove('active');
                }
                document.body.style.overflow = '';
                console.log('Closing menu');
            } else {
                // Open menu
                this.setAttribute('aria-expanded', 'true');
                if (mobileNav) {
                    mobileNav.classList.add('active');
                }
                document.body.style.overflow = 'hidden';
                console.log('Opening menu');
            }
            
            console.log('Is expanded after:', this.getAttribute('aria-expanded') === 'true');
        });
    }
    
    // Close mobile nav when close button is clicked
    if (closeMobileNav) {
        closeMobileNav.addEventListener('click', function() {
            console.log('Close button clicked');
            if (hamburgerMenu) {
                hamburgerMenu.setAttribute('aria-expanded', 'false');
            }
            if (mobileNav) {
                mobileNav.classList.remove('active');
            }
            document.body.style.overflow = '';
        });
    }
    
    // Close mobile nav when clicking on a link
    mobileNavLinks.forEach(link => {
        link.addEventListener('click', function() {
            console.log('Nav link clicked');
            if (hamburgerMenu) {
                hamburgerMenu.setAttribute('aria-expanded', 'false');
            }
            if (mobileNav) {
                mobileNav.classList.remove('active');
            }
            document.body.style.overflow = '';
        });
    });
    
</script>
</body>

</html>
